<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Botón Idiota</title>
  <style>
    body { text-align:center; font-family: Arial; background:#f2f2f2; margin-top:50px; }
    h1 { color: #333; }
    #boton { 
      font-size: 2em; padding: 20px 40px; margin-top: 30px; 
      background: #ff6666; border:none; border-radius:10px; color:white; 
      cursor:pointer; 
    }
    #mensaje { margin-top:20px; font-size: 1.5em; color:#555; }
  </style>
</head>
<body>
  <h1>Esta es la web de un idiota 😅</h1>
  <p>Presiona el botón:</p>
  <button id="boton">PRESIONAME</button>
  <div id="mensaje"></div>

  <!-- Incluimos la librería Paho MQTT -->
  <script src="https://unpkg.com/paho-mqtt@1.1.0/paho-mqtt-min.js"></script>
  <script>
    // Configuración del broker
    const broker = "tu_broker_url"; // reemplaza con la URL real de tu broker
    const port = 8884;               // puerto WebSocket
    const user = "Kevin Kennedy";    // usuario del broker
    const password = "Pelotudo2";    // contraseña del broker
    const topic = "carrito/boton";   // tópico MQTT

    // Creamos cliente MQTT
    const client = new Paho.MQTT.Client(broker, port, "webClient");

    client.connect({
      useSSL: true,
      userName: user,
      password: password,
      onSuccess: onConnect,
      onFailure: function(err){ console.log("Error conexión: ", err); }
    });

    function onConnect() {
      console.log("Conectado al broker!");
    }

    // Función al presionar el botón
    document.getElementById("boton").addEventListener("click", function() {
      if(client.isConnected()){
        client.send(topic, "ON");  // Envía mensaje al ESP32
        document.getElementById("mensaje").innerText = "Gracias por perder tu tiempo tan valioso en esta estupidez 😅";
      } else {
        document.getElementById("mensaje").innerText = "No conectado al broker 😬";
      }
    });
  </script>
</body>
</html>
